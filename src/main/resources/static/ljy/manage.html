<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>超市管理系统</title>
		<link rel="stylesheet" href="css/commodity.css" />
		<link rel="stylesheet" href="../public/css/bootstrap.css" />
		<script type="text/javascript" src="../public/js/vue.js" ></script>
		<script type="text/javascript" src="../public/js/ajaxUtil.js" ></script>
		<script type="text/javascript" src="../public/js/jquery-1.12.4.js" ></script>
		
		<link rel="stylesheet" href="../layui/css/layui.css" />
		<script type="text/javascript" src="../layui/layui.js" ></script>
	</head>
	
	<body class="layui-layout-body">
	<div class="layui-layout layui-layout-admin">
	  <div class="layui-header">
	    <div class="layui-logo">超市管理系统</div>
	    <ul class="layui-nav layui-layout-right">
	      <li class="layui-nav-item">
	      	<img src="./img/haiwenxiang.jpg" class="layui-nav-img">
	      </li>
	      <li class="layui-nav-item">
	      	<a>姓名</a>
	      </li>
	      <li class="layui-nav-item"><a href="">退出登录</a></li>
	    </ul>
	  </div>
	  
	  <div class="layui-side layui-bg-black">
	    <div class="layui-side-scroll">
	      <ul class="layui-nav layui-nav-tree"  lay-filter="test">
	        <li class="layui-nav-item">
	          <a class="" href="javascript:;">个人中心</a>
	          <dl class="layui-nav-child">
	            <dd><a href="javascript:;">&emsp;修改信息</a></dd>
	          </dl>
	        </li>
	        <li class="layui-nav-item">
	          <a href="javascript:;">商品管理</a>
	          <dl class="layui-nav-child">
	            <dd><a href="javascript:;">&emsp;上架商品</a></dd>
	            <dd><a href="javascript:;">&emsp;购入商品</a></dd>
	          </dl>
	        </li>
	        <li class="layui-nav-item">
	          <a href="javascript:;">员工管理</a>
	          <dl class="layui-nav-child">
	            <dd><a href="javascript:;">&emsp;权限管理</a></dd>
	          </dl>
	        </li>
	        <li class="layui-nav-item"><a href="">关于我们</a></li>
	      </ul>
	    </div>
	  </div>
	  
	  <div class="layui-body" style="margin-bottom: -45px;">
	    <!-- 内容主体区域 -->
	    <div style="padding: 30px;">
	    	
	    	
			 
			<div class="layui-tab layui-tab-card" style="height: 500px;">
			  <ul class="layui-tab-title">
			    <li class="layui-this">人员一览</li>
			    <li>添加员工</li>
			    <li>批量修改</li>
			  </ul>
			  <div class="layui-tab-content" style="height: 100px;" >
			  	
			  	<!--人员一览-->
			    <div class="layui-tab-item layui-show" style="padding: -40px;">
					<table class="layui-hide" id="table" ></table>

			    </div>
			    
			 	<!--添加员工-->
			    <div class="layui-tab-item">
			    	
			    	<div class="layui-card">
			    	<div class="layui-card-body" style="padding-top: 40px;">
			    	<form class="layui-form" action="" method="post">
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label" style="width: 100px;">职工号：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="stu_num" id="stu_num" lay-verify="required" class="layui-input" id="stu_num">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">姓名：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="name" id="name" lay-verify="required" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">职位：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="rname" id="rname" class="layui-input" value="普通员工" disabled="disabled">
					      </div>
					    </div>
					  </div>
					  
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">性别：</label>
					      <div class="layui-input-inline">
						      <input type="radio" name="sex" value="男" title="男" checked="">
						      <input type="radio" name="sex" value="女" title="女">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">年龄：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="age" id="age" lay-verify="required|number|age" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">所属区：</label>
					      <div class="layui-input-inline">
					        <select name="region" lay-verify="required" lay-search="" id="region">
					          <option value="">直接选择或搜索选择</option>
					          <option value="1">layer</option>
					          <option value="2">form</option>
					          <option value="3">layim</option>
					          <option value="4">element</option>
					          <option value="5">laytpl</option>
					          <option value="6">upload</option>
					          <option value="7">laydate</option>
					          <option value="8">laypage</option>
					          <option value="9">flow</option>
					          <option value="10">util</option>
					          <option value="11">code</option>
					          <option value="12">tree</option>
					          <option value="13">layedit</option>
					          <option value="14">nav</option>
					          <option value="15">tab</option>
					          <option value="16">table</option>
					          <option value="17">select</option>
					          <option value="18">checkbox</option>
					          <option value="19">switch</option>
					          <option value="20">radio</option>
					        </select>
					      </div>
					    </div>
					  </div>
					  
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">工龄：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="seniority" id="seniority" lay-verify="seniority" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">工资：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="salary" id="salary" lay-verify="required|number" class="layui-input">
					      </div>
					    </div>
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">身份证：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="pid" id="pid" lay-verify="identity" autocomplete="off" class="layui-input">
					      </div>
					    </div>
					  </div>
					  
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <div class="layui-input-inline">
					      	<label class="layui-form-label"  style="width: 100px;">
					      		<input type="submit" class="layui-btn" lay-submit="" lay-filter="L_submit" value="新增" style="margin-left: 85px;"/>
					      	</label>
					      </div>
					    </div>
					  </div>
					</form>
			    	</div>
			    	</div>
			    	
			    </div>
			    
			    <!--批量修改-->
			    <div class="layui-tab-item">
			    	
			    	<fieldset class="layui-elem-field layui-field-title" style="margin: 20px;">
					  <legend style="font-size: larger;">说明：1.选择您需要的操作；2.选择条件；3.输入符合的条件值；4.选择要修改的信息；5.输入修改的值（请严格按照规范操作，否则后果自负）</legend>
					</fieldset>
					
					<div class="layui-card">
			    	<div class="layui-card-body" style="padding-top: 40px;">
			    	<form class="layui-form" action="" method="post">
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label" style="width: 100px;">1.操作：</label>
					      <div class="layui-input-inline">
					        <select name="modules" lay-verify="required" lay-search="">
					          <option value="">直接选择或搜索选择</option>
					          <option value="update">批量修改</option>
					          <option value="delete">删除</option>
					        </select>
					      </div>
					    </div>
					    
					    <div class="layui-inline">
					      <label class="layui-form-label" style="width: 100px;">2.条件：</label>
					      <div class="layui-input-inline">
					        <select name="modules" lay-verify="required" lay-search="">
					          <option value="">直接选择或搜索选择</option>
					          <option value="stu_num">职工号</option>
					          <option value="name">姓名</option>
					          <option value="gender">性别</option>
					          <option value="age">年龄</option>
					          <option value="seniority">工龄</option>
					          <option value="salary">工资</option>
					          <option value="region">所属区</option>
					        </select>
					      </div>
					    </div>
					    
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">3.条件值：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="salary" id="salary" class="layui-input">
					      </div>
					    </div>
					  </div>
					  
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <label class="layui-form-label" style="width: 100px;">4.改信息：</label>
					      <div class="layui-input-inline">
					        <select name="modules" lay-verify="required" lay-search="">
					          <option value="">直接选择或搜索选择</option>
					          <option value="stu_num">职工号</option>
					          <option value="name">姓名</option>
					          <option value="gender">性别</option>
					          <option value="age">年龄</option>
					          <option value="seniority">工龄</option>
					          <option value="salary">工资</option>
					          <option value="region">所属区</option>
					        </select>
					      </div>
					    </div>
					    
					    <div class="layui-inline">
					      <label class="layui-form-label"  style="width: 100px;">5.修改值：</label>
					      <div class="layui-input-inline">
					        <input type="text" name="salary" id="salary" class="layui-input">
					      </div>
					    </div>
					  </div>
					  
					  
					  <div class="layui-form-item">
					    <div class="layui-inline">
					      <div class="layui-input-inline">
					      	<label class="layui-form-label"  style="width: 100px;">
					      		<input type="submit" class="layui-btn" lay-submit="" lay-filter="L_submit" value="提交" style="margin-left: 85px;"/>
					      	</label>
					      </div>
					    </div>
					  </div>
					</form>
			    	</div>
			    	</div>
			    	
			    </div>
			  </div>
			</div>
	    	
	    </div>
	  </div>

	</div>
	<script>
	layui.use('element', function(){
	  var element = layui.element;
	  
	});
	
	layui.use('table', function(){
	  var table = layui.table;
	  
	  table.render({
	    elem: '#table'
	    ,url:'/Info_employee/getAllInfo'
	    ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
	    ,cols: [[
	      {field:'stu_num', title: '职工号', sort: true, align: 'center'}
	      ,{field:'name', title: '姓名', align: 'center'} //width 支持：数字、百分比和不填写。你还可以通过 minWidth 参数局部定义当前单元格的最小宽度，layui 2.2.1 新增
	      ,{field:'gender', title: '性别', sort: true, align: 'center'}
	      ,{field:'age', title: '年龄', align: 'center'}
	      ,{field:'seniority', title: '工龄', align: 'center'}
	      ,{field:'salary', title: '工资', align: 'center'} //单元格内容水平居中
	      ,{field:'region', title: '所属区', sort: true, align: 'center'}
	    ]]
	  });
	});
	
	</script>
</body>
	
	<script type="text/javascript">
		
		layui.use(['form'], function(){
			var form = layui.form;
			
		form.verify({
		    age: function(value) {
		    	if(!value.match(reg)) {
		    		return '请输入规范数值！';
		    	}
		    	if (Number(value) < 18 || Number(value) > 65) {
		    		return '年龄未在18岁到65岁之间，不符合规定！';
		    	}
		    }
		    ,stu_num: function(value) {
		    	if(value.length > 15) {
		    		return '职工号不符合规范！';
		    	}
		    }
		    ,name: function(value) {
		    	if(value.length > 10) {
		    		return '名字最长10个字符！';
		    	}
		    }
		    ,seniority: function(value) {
		    	if(!value.match(reg)) {
		    		return '请输入规范数值！';
		    	}
		    	if (Number(value) < 0 || Number(value) > 47) {
		    		return '工龄不符合规范！';
		    	}
		    }
		});
		
		form.on('submit(L_submit)', function(data) {
			var stu_num = util.escape($("#stu_num").val());
			var age=util.escape($("#age").val());
			var name=util.escape($("#name").val());
			var seniority=util.escape($("#seniority").val());
			var pid=util.escape($("#pid").val());
			var sex = $("input[name='sex']:checked").val();
			var region_select = document.getElementById("region");
			var index = region_select.selectedIndex;
			var region = region_select.options[index].value;

			
			$.ajax({
				type:'POST',
				url:'/Info/modifyInfo',
				data:{age:age, name:name, seniority:seniority, pid:pid},
				success:function(data){
					layer.alert("修改成功！");
				},
				error:function() {
					layer.alert("修改失败！");
				}
			});
			return false;
		});
			
			
			
		})
		
	</script>
	
</html>
