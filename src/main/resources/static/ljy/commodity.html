<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/grzx.css"/>
		<link rel="stylesheet" href="css/commodity.css" />
		<link rel="stylesheet" href="../public/css/bootstrap.css" />
		<script type="text/javascript" src="../public/js/vue.js" ></script>
		<script type="text/javascript" src="../public/js/ajaxUtil.js" ></script>
	</head>
	
	<script type="text/javascript">
		
	</script>
	
	<body>
		<div class="header">
			<p>超市管理系统</p>
		</div>
		<div class="center">
			<div class="center_of_left">
				<div id="Personal_management">
					<p><a href="#" >个人中心&gt;</a></p>
				</div>
				<div id="Commodity_management">
					<p><a href="#" class="nav-item">商品管理&gt;</a></p>
				</div>
				<div id="Staff_management">
					<p>	<a href="#">员工管理&gt;</a></p>
				</div>
			</div>
		
		
			<div id="center_of_right">
				<div id="head">
					<div class="head-item">
						<img src="img/haiwenxiang.jpg" id="head-img"/>
						<span class="name">名字/身份</span>
					</div>
					<div class="head-item">
						<div class="shangpingqu">商品区：</div>
						<div class="qu">
							<select name="select">
								<option value="all" selected="selected">全部区/瓜果区/生鲜区……</option>
								<option value="fruit">水果区</option>
								<option value="vegetable">蔬菜区</option>
								<option value="fresh">生鲜区</option>
							</select>
						</div>
					</div>
					<div class="head-item">
						<div class="add">
							<button class="btn btn-info">新增商品</button>
						</div>
					</div>
				</div>
				
				<div class="content">
					<div class="content-left" id="commodity">
						
						<div class="comodity-item" v-for="item in items">
							<div style="display: flex;">
								<div>
									<img :src="`http://localhost:8080/image/commodity?cnum=${item.cnum}`"  class="comodity-img" />
								</div>
								<div>
									<div class="item-text">商品号：{{item.cnum}}</div>
									<div class="item-text">商品名：{{item.name}}</div>
									<div class="item-text">单价：{{item.price}}</div>
									<div class="item-text">类别：{{item.sort}}</div>
									<div class="item-text">生产日期：{{item.p_date}}</div>
									<div class="item-text">保质期至：{{item.safe_date}}</div>
								</div>
							</div>
						</div>
						
					</div>
					
					<div class="content-right">
						<div class="sum">
							<div class="">总商品量：</div>
							<div class="">总销售量：</div>
							<div class="">总销售额：</div>
							<div class="">总利润：</div>
						</div>
						<div class="sum">
							<div class="history">历史出库单：</div>
							<div class="history">
								<a :href="stock.url" v-for="stock in stocks">{{stock.outdate}} -> {{stock.pname}}</a><br />
							</div>
							<div class="history">
								<a href="#">查看更多历史出库单-></a>
							</div>
						</div>
						
					</div>
				</div>
				
			</div>
			
		</div>
		
	</body>
	
	<script type="text/javascript">
		
		var v1 = new Vue({
			el: '#commodity',
			data: {
				items: []
			},
			mounted() {
					this.getInfo();
			},
			methods: {
				getInfo() {
					ajax({
						method: HTTP_METHOD.GET, 
				   		url: "/commodity/commodity", 
				   		async: true, 
				   		type: HTTP_RESPONSE_TYPE.JSON, 
				   		callback: (datas) => { // 这里错了 你这里下面的 this 是 这个 ajax( 里面这个对象表示的 this ，JS 的this 初学者很容易犯错)
				   			console.log(datas)
				   			// 改用箭头函数 ，this 就会与当前环境 上下文保持一致，就是 this 指向是 Vue的实例
				   			this.items = datas
				   		}
			   		})
				}
			}
		})
		
	</script>
	
</html>
